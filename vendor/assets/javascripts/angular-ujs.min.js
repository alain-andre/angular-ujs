/*! angular-ujs - v0.2.0 - 2013-12-16
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2013 [tomchentw](https://github.com/tomchentw/);
 * Licensed [MIT](http://tomchentw.mit-license.org/)
 */
(function(){var a,b,c,d,e,f,g,h,i;a=angular.noop,b=angular.element,c=angular.isString,d=function(){return{restrict:"A",link:function(a,b,c,d){d.confirm=c.confirm},controller:["$window"].concat(function(a){this.allowAction=function(){return a.confirm(this.confirm)}})}},e={allowAction:function(){return!0}},f=["$document","$parse","$http"].concat(function(a){var c;return c=function(){var b,c,d,e,f,g;for(b={},c=a.find("meta"),d=0,e=c.length;e>d;++d)f=d,g=c.eq(f),b[g.attr("name")]=g.attr("content");return b},{metaTags:c,appendCsrfInputTo:function(a){var d,e;d=c(),e=b('<input type="hidden"/>'),e.attr("name",d["csrf-param"]),e.attr("value",d["csrf-token"]),a.append(e)},cancelActionOn:function(a){a.preventDefault(),a.stopPropagation()}}}),g=["rails"].concat(function(a){return{require:["?confirm","?remote"],restrict:"A",link:function(b,d,f,g){var h,i,j;h=g[0]||e,i=g[1],c(d.attr("data-remote"))&&(j=function(b){var c;a.cancelActionOn(b),c=h.allowAction(),c&&i.submitForm(d,f.remote)},d.on("submit",j),b.$on("$destroy",function(){d.off("submit",j)}))},controller:["$scope","$http"].concat(function(a,b){var c,d;c=function(b){a.$emit("rails:remote:success",b)},d=function(b){a.$emit("rails:remote:error",b)},this.submitForm=function(e,f){var g;return b({method:e.attr("method"),url:e.attr("action"),data:(g={},g[f+""]=a[f],g)}).then(c,d)}})}}),h={submitForm:function(b){return b[0].submit(),{then:a}}},i=["$document","$compile","rails"].concat(function(a,c,d){return{require:["?confirm","?remote"],restrict:"A",link:function(f,g,i,j){var k,l,m;k=j[0]||e,l=j[1]||h,g.attr("data-method")&&(m=function(e){var g,h,j;d.cancelActionOn(e),g=k.allowAction(),g&&(h=b('<form class="ng-hide" method="post"></form>'),h.attr("action",i.href),d.appendCsrfInputTo(h),j=b('<input type="hidden" name="_method" ng-model="link._method">'),j.attr("value",i.method),h.append(j),c(h)(f.$new(!0)),a.find("body").append(h),l.submitForm(h,"link").then(function(){h.remove()}))},g.on("click",m),f.$on("$destroy",function(){g.off("click",m)}))}}}),angular.module("rails.ujs",["ng-rails-csrf"]).directive("confirm",d).factory("rails",f).directive("remote",g).directive("method",i)}).call(this);