/*! angular-ujs - v0.1.0 - 2013-12-14
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2013 [tomchentw](https://github.com/tomchentw/);
 * Licensed [MIT](http://tomchentw.mit-license.org/)
 */
(function(){var a,b,c,d,e,f,g,h;a=angular.noop,b=angular.element,c=function(){return{restrict:"A",link:function(a,b,c,d){d.confirm=c.confirm},controller:["$window"].concat(function(a){this.allowAction=function(){return a.confirm(this.confirm)}})}},d={allowAction:function(){return!0}},e=["$document","$parse","$http"].concat(function(a,c,d){var e;return e=function(){var b,c,d,e,f,g;for(b={},c=a.find("meta"),d=0,e=c.length;e>d;++d)f=d,g=c.eq(f),b[g.attr("name")]=g.attr("content");return b},{metaTags:e,appendCsrfInputTo:function(a){var c,d;c=e(),d=b('<input type="hidden"/>'),d.attr("name",c["csrf-param"]),d.attr("value",c["csrf-token"]),a.append(d)},cancelActionOn:function(a){a.preventDefault(),a.stopPropagation()},remoteSubmit:function(a){var b,e,f,g,h,i,j;for(b={},e=a.find("input"),f=0,g=e.length;g>f;++f)switch(h=f,i=e.eq(h),j=i.attr("name"),j.match(/\[\S+\]/)&&(j=j.replace(/\[/g,".").replace(/\]/g,"")),i.attr("type")){case"file":return!1;case"checkbox":if(!i[0].checked)break;default:console.log(j,i.val()),c(j).assign(b,i.val())}return d({method:a.attr("method"),url:a.attr("action"),data:b})}}}),f=["rails"].concat(function(a){return{require:["?confirm","?remote"],restrict:"A",link:function(b,c,e,f){var g,h,i;g=f[0]||d,h=f[1],c.attr("data-remote")&&(i=function(b){var d;a.cancelActionOn(b),d=g.allowAction(),d&&h.submitForm(c,e.type)},c.on("submit",i),b.$on("$destroy",function(){c.off("submit",i)}))},controller:["rails"].concat(function(a){this.submitForm=function(b){a.remoteSubmit(b)}})}}),g={submitForm:function(a){a[0].submit()}},h=["$document","rails"].concat(function(a,c){return{require:["?confirm","?remote"],restrict:"A",link:function(e,f,h,i){var j,k,l;j=i[0]||d,k=i[1]||g,f.attr("data-method")&&(l=function(d){var e,f,g;c.cancelActionOn(d),e=j.allowAction(),e&&(f=b('<form method="post"></form>'),f.attr("action",h.href),c.appendCsrfInputTo(f),g=b('<input type="hidden" name="_method">'),g.attr("value",h.method),f.append(g),a.find("body").append(f),k.submitForm(f))},f.on("click",l),e.$on("$destroy",function(){f.off("click",l)}))}}}),angular.module("rails.ujs",["ng-rails-csrf"]).directive("confirm",c).factory("rails",e).directive("remote",f).directive("method",h)}).call(this);