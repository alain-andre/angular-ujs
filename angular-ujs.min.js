/*! angular-ujs - v 0.4.12 - Fri Mar 14 2014 12:56:09 GMT+0800 (CST)
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2014 [tomchentw](https://github.com/tomchentw);
 * Licensed [MIT](http://tomchentw.mit-license.org)
 */
(function(){"use strict";function t(t){t.preventDefault(),t.stopPropagation()}var o;o=angular.bind,angular.module("angular.ujs",[]).factory("$getRailsCSRF",["$document"].concat(function(t){return function(){var o,n,r,e,i;for(o={},n=0,e=(r=t[0].querySelectorAll('meta[name^="csrf-"]')).length;e>n;++n)i=r[n],i=angular.element(i),o[i.attr("name")]=i.attr("content");return o}})).controller("noopRailsConfirmCtrl",function(){function o(){}var n=o.prototype;return n.allowAction=function(){return!0},n.denyDefaultAction=t,o}()).controller("RailsConfirmCtrl",function(){function o(t,o){this.$window=t,this.$attrs=o}var n=o.prototype;return n.allowAction=function(){var t;return t=this.$attrs.confirm,angular.isDefined(t)&&this.$window.confirm(t)},n.denyDefaultAction=t,o.$inject=["$window","$attrs"],o}()).controller("noopRailsRemoteFormCtrl",function(){function t(){}var o=t.prototype;return o.submit=function(t){return t[0].submit(),{then:angular.noop}},t}()).controller("RailsRemoteFormCtrl",function(){function t(t,n,r,e){this.$scope=t,this.$attrs=n,this.$parse=r,this.$http=e,this.successCallback=o(this,this.successCallback),this.errorCallback=o(this,this.errorCallback)}var n=t.prototype;return n.submit=function(t){var o,n,r,e,i,c,a,l={}.hasOwnProperty;if(o=t.scope(),n=this.$attrs.remote,r={},n+""!="true")this.$parse(n).assign(r,o.$eval(n));else for(e in o)if(l.call(o,e)){if(i=o[e],"this"===e||"$"===e[0])continue;r[e]=i}return c={url:t.attr("action"),method:t.attr("method"),data:r},a=r._method,"GET"!==a&&"POST"!==a&&(c.headers={"X-Http-Method-Override":a}),this.$http(c).then(this.successCallback,this.errorCallback)},n.successCallback=function(t){this.$scope.$emit("rails:remote:success",t)},n.errorCallback=function(t){this.$scope.$emit("rails:remote:error",t)},t.$inject=["$scope","$attrs","$parse","$http"],t}()).directive("confirm",function(){function t(t,o){t.allowAction()||t.denyDefaultAction(o)}function n(n,r,e,i){var c;c=o(void 0,t,i[0]),r.on("click",c),n.$on("$destroy",function(){r.off("click",c)})}return{restrict:"A",require:["confirm"],controller:"RailsConfirmCtrl",compile:function(t,o){var r;return r=o.$attr,"data-confirm"===r.confirm&&"data-remote"!==r.remote&&"data-method"!==r.method?n:void 0}}}).directive("remote",["$controller"].concat(function(t){function n(t,o,n){o[1].denyDefaultAction(n),o[1].allowAction()&&o[0].submit(t)}function r(r,e,i,c){var a;c[1]||(c[1]=t("noopRailsConfirmCtrl",{$scope:r})),a=o(void 0,n,e,c),e.on("submit",a),r.$on("$destroy",function(){e.off("submit",a)})}return{require:["remote","?confirm"],restrict:"A",controller:"RailsRemoteFormCtrl",compile:function(t,o){return"data-remote"===o.$attr.remote?r:void 0}}})).directive("method",["$controller","$compile","$document","$getRailsCSRF"].concat(function(t,n,r,e){function i(t,o,i,c){var a,l,s;i[0].allowAction()&&i[0].denyDefaultAction(c),a=e(),l=t.$new(),s=n('<form class="ng-hide" method="POST" action="'+o.href+'">\n  <input type="text" name="_method" ng-model="_method">\n  <input type="text" name="'+a["csrf-param"]+'" value="'+a["csrf-token"]+'">\n</form>')(l),r.find("body").append(s),l.$apply(function(){l._method=o.method}),i[1].submit(s).then(function(){l.$destroy(),s.remove()})}function c(n,r,e,c){var a,l;a={$scope:n,$attrs:e},c[0]||(c[0]=t("noopRailsConfirmCtrl",a)),c[1]||(c[1]=t("noopRailsRemoteFormCtrl",a)),l=o(c,i,n,e,c),r.on("click",l),n.$on("$destroy",function(){r.off("click",l)})}return{require:["?confirm","?remote"],restrict:"A",compile:function(t,o){return"data-method"===o.$attr.method?c:void 0}}}))}).call(this);