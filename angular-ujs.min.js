/*! angular-ujs - v 0.4.7 - Sat Jan 25 2014 23:06:35 GMT+0800 (CST)
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2014 [tomchentw](https://github.com/tomchentw/);
 * Licensed [MIT](http://tomchentw.mit-license.org/)
 */(function(){"use strict";var t;t=function(t){t.preventDefault(),t.stopPropagation()},angular.module("angular.ujs",[]).factory("$getRailsCSRF",["$document"].concat(function(t){return function(){var n,o,e,r,i;for(n={},o=0,r=(e=t[0].querySelectorAll('meta[name^="csrf-"]')).length;r>o;++o)i=e[o],i=angular.element(i),n[i.attr("name")]=i.attr("content");return n}})).controller("noopRailsConfirmCtrl",function(){this.allowAction=function(){return!0},this.denyDefaultAction=t}).controller("RailsConfirmCtrl",["$window","$attrs"].concat(function(n,o){this.allowAction=function(){var t;return t=o.confirm,angular.isDefined(t)&&n.confirm(t)},this.denyDefaultAction=t})).controller("noopRailsRemoteFormCtrl",function(){this.submit=function(t){return t[0].submit(),{then:angular.noop}}}).controller("RailsRemoteFormCtrl",["$scope","$attrs","$parse","$http"].concat(function(t,n,o,e){var r,i;r=function(n){t.$emit("rails:remote:success",n)},i=function(n){t.$emit("rails:remote:error",n)},this.submit=function(t){var c,a,l,u,m,f,s,d={}.hasOwnProperty;if(c=t.scope(),a=n.remote,l={},a+""!="true")o(a).assign(l,c.$eval(a));else for(u in c)if(d.call(c,u)){if(m=c[u],"this"===u||"$"===u[0])continue;l[u]=m}return f={url:t.attr("action"),method:t.attr("method"),data:l},s=l._method,"GET"!==s&&"POST"!==s&&(f.headers={"X-Http-Method-Override":s}),e(f).then(r,i)}})).directive("confirm",function(){function t(t){this.allowAction()||this.denyDefaultAction(t)}function n(n,o,e,r){var i;i=angular.bind(r[0],t),o.on("click",i),n.$on("$destroy",function(){o.off("click",i)})}return{restrict:"A",require:["confirm"],controller:"RailsConfirmCtrl",compile:function(t,o){var e;return e=o.$attr,"data-confirm"===e.confirm&&"data-remote"!==e.remote&&"data-method"!==e.method?n:void 0}}}).directive("remote",["$controller"].concat(function(t){function n(t,n){this[1].denyDefaultAction(n),this[1].allowAction()&&this[0].submit(t)}function o(o,e,r,i){var c;i[1]||(i[1]=t("noopRailsConfirmCtrl",{$scope:o})),c=angular.bind(i,n,e),e.on("submit",c),o.$on("$destroy",function(){e.off("submit",c)})}return{require:["remote","?confirm"],restrict:"A",controller:"RailsRemoteFormCtrl",compile:function(t,n){return"data-remote"===n.$attr.remote?o:void 0}}})).directive("method",["$controller","$compile","$document","$getRailsCSRF"].concat(function(t,n,o,e){function r(t,r,i){var c,a,l;this[0].allowAction()&&this[0].denyDefaultAction(i),c=e(),a=t.$new(),l=n('<form class="ng-hide" method="POST" action="'+r.href+'">\n  <input type="text" name="_method" ng-model="_method">\n  <input type="text" name="'+c["csrf-param"]+'" value="'+c["csrf-token"]+'">\n</form>')(a),o.find("body").append(l),a.$apply(function(){a._method=r.method}),this[1].submit(l).then(function(){a.$destroy(),l.remove()})}function i(n,o,e,i){var c,a;c={$scope:n,$attrs:e},i[0]||(i[0]=t("noopRailsConfirmCtrl",c)),i[1]||(i[1]=t("noopRailsRemoteFormCtrl",c)),a=angular.bind(i,r,n,e),o.on("click",a),n.$on("$destroy",function(){o.off("click",a)})}return{require:["?confirm","?remote"],restrict:"A",compile:function(t,n){return"data-method"===n.$attr.method?i:void 0}}}))}).call(this);