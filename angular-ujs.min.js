/*! angular-ujs - v 0.4.5 - Thu Jan 16 2014 01:38:53 GMT+0800 (CST)
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2014 [tomchentw](https://github.com/tomchentw/);
 * Licensed [MIT](http://tomchentw.mit-license.org/)
 */(function(){"use strict";var t;t=function(t){t.preventDefault(),t.stopPropagation()},angular.module("angular.ujs",[]).config(["$provide","$injector"].concat(function(t,o){var n;n="$getRailsCSRF",o.has(n)||t.factory(n,["$document"].concat(function(t){return function(){var o,n,e,r,i;for(o={},n=0,r=(e=t[0].querySelectorAll('meta[name^="csrf-"]')).length;r>n;++n)i=e[n],i=angular.element(i),o[i.attr("name")]=i.attr("content");return o}}))})).controller("noopRailsConfirmCtrl",function(){this.allowAction=function(){return!0},this.denyDefaultAction=t}).controller("noopRailsRemoteFormCtrl",function(){this.submit=function(t){return t[0].submit(),{then:angular.noop}}}).controller("RailsConfirmCtrl",["$window"].concat(function(o){this.allowAction=function(t){var n;return n=t.confirm,angular.isDefined(n)&&o.confirm(n)},this.denyDefaultAction=t})).directive("confirm",function(){var t;return t=function(t,o,n,e){var r,i;r=e[0],i=function(t){r.allowAction(n)||r.denyDefaultAction(t)},o.on("click",i),t.$on("$destroy",function(){o.off("click",i)})},{restrict:"A",require:["confirm"],controller:"RailsConfirmCtrl",compile:function(o,n){var e;return e=n.$attr,"data-confirm"===e.confirm&&"data-remote"!==e.remote&&"data-method"!==e.method?t:void 0}}}).controller("RailsRemoteFormCtrl",["$scope","$parse","$http"].concat(function(t,o,n){var e,r;e=function(o){t.$emit("rails:remote:success",o)},r=function(o){t.$emit("rails:remote:error",o)},this.submit=function(t,i){var c,a,l,u,f,m,s={}.hasOwnProperty;if(c=t.scope(),a={},i+""!="true")o(i).assign(a,c.$eval(i));else for(l in c)if(s.call(c,l)){if(u=c[l],"this"===l||"$"===l[0])continue;a[l]=u}return f={url:t.attr("action"),method:t.attr("method"),data:a},m=a._method,"GET"!==m&&"POST"!==m&&(f.headers={"X-Http-Method-Override":m}),n(f).then(e,r)}})).directive("remote",["$controller"].concat(function(t){var o;return o=function(o,n,e,r){var i,c,a;i=r[0],c=r[1]||t("noopRailsConfirmCtrl",{$scope:o}),a=function(t){c.denyDefaultAction(t),c.allowAction(e)&&i.submit(n,e.remote)},n.on("submit",a),o.$on("$destroy",function(){n.off("submit",a)})},{require:["remote","?confirm"],restrict:"A",controller:"RailsRemoteFormCtrl",compile:function(t,n){return"data-remote"===n.$attr.remote?o:void 0}}})).directive("method",["$controller","$compile","$document","$getRailsCSRF"].concat(function(t,o,n,e){var r;return r=function(r,i,c,a){var l,u,f;l=a[0]||t("noopRailsConfirmCtrl",{$scope:r}),u=a[1]||t("noopRailsRemoteFormCtrl",{$scope:r}),f=function(t){var i,a,f;l.allowAction(c)&&l.denyDefaultAction(t),i=e(),a=r.$new(),f=o('<form class="ng-hide" method="POST" action="'+c.href+'">\n  <input type="text" name="_method" ng-model="_method">\n  <input type="text" name="'+i["csrf-param"]+'" value="'+i["csrf-token"]+'">\n</form>')(a),n.find("body").append(f),a.$apply(function(){a._method=c.method}),u.submit(f,!0).then(function(){a.$destroy(),f.remove()})},i.on("click",f),r.$on("$destroy",function(){i.off("click",f)})},{require:["?confirm","?remote"],restrict:"A",compile:function(t,o){return"data-method"===o.$attr.method?r:void 0}}}))}).call(this);