/*! angular-ujs - v0.4.0 - 2014-01-02
 * https://github.com/tomchentw/angular-ujs
 * Copyright (c) 2014 [tomchentw](https://github.com/tomchentw/);
 * Licensed [MIT](http://tomchentw.mit-license.org/)
 */
(function(){var a;a=function(a){a.preventDefault(),a.stopPropagation()},angular.module("angular.ujs",[]).config(["$provide","$injector"].concat(function(a,b){var c;c="$getRailsCSRF",b.has(c)||a.factory(c,["$document"].concat(function(a){return function(){var b,c,d,e,f;for(b={},c=0,e=(d=a[0].querySelectorAll('meta[name^="csrf-"]')).length;e>c;++c)f=d[c],f=angular.element(f),b[f.attr("name")]=f.attr("content");return b}}))})).controller("noopRailsConfirmCtrl",function(){this.allowAction=function(){return!0},this.denyDefaultAction=a}).controller("noopRailsRemoteFormCtrl",function(){this.submit=function(a){return a[0].submit(),{then:angular.noop}}}).controller("RailsConfirmCtrl",["$window"].concat(function(b){this.allowAction=function(a){var c;return c=a.confirm,angular.isDefined(c)&&b.confirm(c)},this.denyDefaultAction=a})).directive("confirm",function(){var a;return a=function(a,b,c,d){var e,f;e=d[0],f=function(a){e.denyDefaultAction(a),!e.allowAction(c)},b.on("click",f),a.$on("$destroy",function(){b.off("click",f)})},{restrict:"A",require:["confirm"],controller:"RailsConfirmCtrl",compile:function(b,c){var d;return d=c.$attr,"data-confirm"===d.confirm&&"data-remote"!==d.remote&&"data-method"!==d.method?a:void 0}}}).controller("RailsRemoteFormCtrl",["$scope","$parse","$http"].concat(function(a,b,c){var d,e;d=function(b){a.$emit("rails:remote:success",b)},e=function(b){a.$emit("rails:remote:error",b)},this.submit=function(a,f){var g,h,i,j,k,l,m={}.hasOwnProperty;if(g=a.scope(),h={},f+""!="true")b(f).assign(h,g.$eval(f));else for(i in g)if(m.call(g,i)){if(j=g[i],"this"===i||"$"===i[0])continue;h[i]=j}return k={url:a.attr("action"),method:a.attr("method"),data:h},l=h._method,"GET"!==l&&"POST"!==l&&(k.headers={"X-Http-Method-Override":l}),c(k).then(d,e)}})).directive("remote",["$controller"].concat(function(a){var b;return b=function(b,c,d,e){var f,g,h;f=e[0],g=e[1]||a("noopRailsConfirmCtrl",{$scope:b}),h=function(a){g.denyDefaultAction(a),g.allowAction(d)&&f.submit(c,d.remote)},c.on("submit",h),b.$on("$destroy",function(){c.off("submit",h)})},{require:["remote","?confirm"],restrict:"A",controller:"RailsRemoteFormCtrl",compile:function(a,c){return"data-remote"===c.$attr.remote?b:void 0}}})).directive("method",["$controller","$compile","$document","$getRailsCSRF"].concat(function(a,b,c,d){var e;return e=function(e,f,g,h){var i,j,k;i=h[0]||a("noopRailsConfirmCtrl",{$scope:e}),j=h[1]||a("noopRailsRemoteFormCtrl",{$scope:e}),k=function(a){var f,h,k;i.allowAction(g)&&i.denyDefaultAction(a),f=d(),h=e.$new(),k=b('<form class="ng-hide" method="POST" action="'+g.href+'">\n  <input type="text" name="_method" ng-model="_method">\n  <input type="text" name="'+f["csrf-param"]+'" value="'+f["csrf-token"]+'">\n</form>')(h),c.find("body").append(k),h.$apply(function(){h._method=g.method}),j.submit(k,!0).then(function(){h.$destroy(),k.remove()})},f.on("click",k),e.$on("$destroy",function(){f.off("click",k)})},{require:["?confirm","?remote"],restrict:"A",compile:function(a,b){return"data-method"===b.$attr.method?e:void 0}}}))}).call(this);